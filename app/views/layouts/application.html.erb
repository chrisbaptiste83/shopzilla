<!DOCTYPE html>
<html>
<head>
  <title>Embroidery Shop</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>
  <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
  <%= javascript_importmap_tags if defined?(javascript_importmap_tags) %>
</head>
<body class="bg-base-200">
  <!-- Navigation Bar -->
<div class="navbar bg-base-100 shadow-xl">
  <div class="flex-1">
    <%= link_to "Embroidery Shop", root_path, class: "btn btn-ghost normal-case text-xl" %>
  </div>
  <div class="flex-none gap-2">
    <%= link_to "Products", products_path, class: "btn btn-ghost" %>
    <% if user_signed_in? %>
      <% if current_user.admin? %>
        <%= link_to "Add Product", new_product_path, class: "btn btn-ghost text-primary" %>
        <%= link_to "Admin Dashboard", admin_root_path, class: "btn btn-ghost text-primary" if defined?(admin_root_path) %>
      <% end %>
      <div class="dropdown dropdown-end">
        <label tabindex="0" class="btn btn-ghost btn-circle avatar">
          <% if current_user.avatar.attached? %>
           <%= image_tag current_user.avatar.variant(resize_to_fill: [40, 40]), class: "w-10 h-10 rounded-full" %>
          <% else %>
            <img src="https://via.placeholder.com/150" alt="User Avatar" class="w-10 h-10 rounded-full" />
          <% end %>
          <div class="w-10 rounded-full">
          </div>
        </label>
        <ul tabindex="0" class="mt-3 z-[1] p-2 shadow menu menu-sm dropdown-content bg-base-100 rounded-box w-52">
          <li><%= link_to "Profile", profile_path %></li>
          <li><%= link_to "Logout", destroy_user_session_path, data: { turbo_method: :delete }, class: "text-error" %></li>
        </ul>
      </div>
    <% else %>
      <%= link_to "Login", new_user_session_path, class: "btn btn-ghost" %>
      <%= link_to "Sign Up", new_user_registration_path, class: "btn btn-primary" %>
    <% end %>
  </div>
</div> 
  <!-- Main Content -->
  <div class="container mx-auto p-4">
    <% if notice %>
      <div class="alert alert-success shadow-lg mb-4">
        <span><%= notice %></span>
      </div>
    <% end %>
    <% if alert %>
      <div class="alert alert-error shadow-lg mb-4">
        <span><%= alert %></span>
      </div>
    <% end %>
    <%= yield %>
  </div>

  <!-- Footer -->
  <footer class="footer footer-center p-4 bg-base-300 text-base-content mt-8">
    <div>
      <p>&copy; <%= Time.current.year %> Embroidery Shop. All Rights Reserved.</p>
    </div>
  </footer>
</body>
</html>
